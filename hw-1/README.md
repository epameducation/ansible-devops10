# Задания
## №1
Создайте плэйбук, выполняющий установку веб-сервера Apache на
управляемом хосте со следующими требованиями:
- установка пакета httpd;
- включение службы веб-сервера и проверка, что он запущен;
- создание файла /var/www/html/index.html с текстом “Welcome to my
web server”;
- используйте модуль firewalld для того, чтобы открыть необходимые
для работы веб-сервера порты брендмауэра;
## №2
Отключите службу NetworkManager  
- Измените файл /etc/default/grub и добавьте параметры net.ifnames=0  
- и biosdevname=0 в строку, выполняющую загрузку ядра.  
- Выполните grub2-mkconfig, чтобы записать изменения в /etc/default/grub  
- Используйте модуль lineinfile для изменения конфигурациионого
файла

# Решение
## Задание №1
Выполнял работу только для ОС семейства red hat, т.к. это основная ОС, которую использую в своей работе.
Если необходимо сделать универсальный playbook для множества семейств ОС, то необходимо под каждое семейство писать свои наборы tasks, т.к. ОС отличаются не только пакетными менеджерами, но и именованием пакетов. И фильтровать их по ansible_os_family
Логика следующая:
- Вызываем базовую роль, в которой определена установка, запуск и автозапуск Firewalld
- Вызываем роль для httpd, в которой происходит открытие стандартных web портов (80, 443), установка httpd, запуска сервиса и добавление его в автозагрузку
- Добавление блока текста в index.html
- Завершающей task добавил вызов exception в случае, если systemd service httpd не работает. Подобное поведение (не с httpd) встречал: когда task с systemd отрабатывает, а приложение по факту не работает

**Дополнительно добавил tag'и для удобства использования playbook и обеспечения гибкости сценария**
## Задание №2
- Вызов модуля lineinfile с обработкой в цикле параметров для модификации файла. Простой вариант: добавить сразу два параметра в необходимую строку. Вариант посложнее (ему отдал предполчтение): не использовать хардкод, отдавая предпочтению возможности конфигурирования и расширения параметров у task
- Вызов grub2-mkconfig. На данном этапе никаких обработчиков не добавлял, т.к. сразу будет понятно применились параметры или нет. Как минимум, проверка корректности заполнения файла будет выполнена самой командой grub2-mkconfig